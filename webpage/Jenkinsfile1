pipeline {
    agent none

    parameters {
        string(name: 'REPO_URL', defaultValue: 'github.com/jcardogo/AlejandroCardoso_website.git', description: 'Git repository URL')
    }

    stages {
        stage('Clone Repository') {
            agent { label 'local' }
            steps {
                try {
                    withCredentials([string(credentialsId: 'GITHUB_PAT', variable: 'GITHUB_TOKEN')]) {
                        git url: "https://jcardogo:${GITHUB_TOKEN}@${params.REPO_URL}"
                    }
                } catch (e) {
                    error "Failed to clone repository: ${e.message}"
                }
            }
        }
    }
}